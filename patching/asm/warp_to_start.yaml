02//checkTreeVisited: |
    cp STARTING_TREE_MAP_INDEX
    jp nz,$6560     ; _mapMenu_checkRoomVisited
    or a
    ret
02/5ec8/: call checkTreeVisited
02/65e1/: call checkTreeVisited
# always treat starting seed tree as visited for warping purposes.
02//checkCursorVisited: |
    ld a,(wMapMenu_cursorIndex)
    jp checkTreeVisited
02/609b/: call checkCursorVisited

02//treeWarp: |
      /ifdef option.secretLocationsEnabled
      ld a,(wKeysPressed)
      and $08
      jr z,@done
      ld a,(wAreaFlags)
      and AREAFLAG_OUTDOORS
      jr nz,@warp
      ld a,SND_ERROR
      jp playSound
      @warp:
      ld hl,wWarpDestGroup
      ld (hl),$80
      inc hl
      ld (hl),$78
      ld l,$4a
      ld (hl),$55
      call $5fbf
      @done:
      jp $4fba
      /endif

02/5ff9/: call checkTreeVisited
02/6133/: call nz,treeWarp
02/618b/: call nz,treeWarp
02/619d/: call checkCursorVisited
02/66a9/: call checkTreeVisited

# warp to start location if holding start when opening the map screen.
02//checkWarpToStart: |
    ld a,(wKeysPressed)
    and BTN_B | BTN_A
    cp BTN_B | BTN_A
    jr nz,@done
    
    ld a,option.startingGroup
    set 7,a
    ld (wWarpDestGroup),a
    ld a,option.startingRoom        ; Starting room ID
    ld (wWarpDestRoom),a
    ld a,option.startingPos         ; Position in starting room
    ld (wWarpDestPos),a
    ld a,option.destTransittion                        ; TRANSITION_DEST_FALL
    ld (wWarpTransition),a
    ld a,$03
    ld (wWarpTransition2),a
    ld a,$ff
    ld (wDisabledObjects),a
    
    ld a,SND_TELEPORT
    call playSound
    
    ld a,$03
    call setMusicVolume
    call clearStaticObjects
    
    ld a,$d0
    ld (wLinkObjectIndex),a
    
    ld a,$03
    ld (wMenuLoadState),a
    pop af      ; pop return addr from stack
    ret
    
    @done:
    jp $5068    ; @openMenu
# Replace the unique call to @openMenu by the above extension checking for warp to start
02/505e/: call checkWarpToStart
